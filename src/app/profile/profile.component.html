<div class="profile-container">
  <!-- Header do Perfil -->
  <div class="profile-card">
    <div class="profile-avatar-section">
      <div class="avatar-large">
        {{ user.name.charAt(0) }}
      </div>
      <div class="avatar-info">
        <h2>{{ user.name }}</h2>
        <p>{{ user.role }} - {{ user.department }}</p>
        <p class="join-date">Membro desde {{ user.joinedDate }}</p>
      </div>
    </div>
    
    <div class="profile-actions">
      <!-- Bot√£o Editar (quando n√£o est√° editando e n√£o est√° carregando) -->
      <button *ngIf="!isEditing && !isLoading" class="btn-primary" (click)="enableEdit()">
        ‚úèÔ∏è Editar Perfil
      </button>
      
      <!-- Mensagem de Loading (quando est√° salvando) -->
      <div *ngIf="isLoading" class="loading-message">
        ‚è≥ Salvando altera√ß√µes...
      </div>
      
      <!-- Bot√µes Salvar/Cancelar (quando est√° editando e n√£o est√° carregando) -->
      <div *ngIf="isEditing && !isLoading" class="form-actions">
        <button class="btn-primary" (click)="saveProfile()" [disabled]="!isFormValid()">
          üíæ Salvar
        </button>
        <button class="btn-secondary" (click)="cancelEdit()">
          ‚ùå Cancelar
        </button>
      </div>
    </div>
  </div>

  <!-- Formul√°rio/Visualiza√ß√£o -->
  <div class="profile-form">
    <h3>Informa√ß√µes Pessoais</h3>
    
    <form *ngIf="isEditing; else viewMode">
      <div class="form-grid">
        <div class="form-group">
          <label for="name">Nome Completo</label>
          <input 
            type="text" 
            id="name" 
            [(ngModel)]="user.name" 
            name="name" 
            class="form-input" 
            required>
        </div>
        
        <div class="form-group">
          <label for="email">Email</label>
          <input 
            type="email" 
            id="email" 
            [(ngModel)]="user.email" 
            name="email" 
            class="form-input" 
            disabled>
          <small>Email n√£o pode ser alterado</small>
        </div>
        
        <div class="form-group">
          <label for="phone">Telefone</label>
          <input 
            type="tel" 
            id="phone" 
            [(ngModel)]="user.phone" 
            name="phone" 
            class="form-input">
        </div>
        
        <div class="form-group">
          <label for="department">Departamento</label>
          <input 
            type="text" 
            id="department" 
            [(ngModel)]="user.department" 
            name="department" 
            class="form-input">
        </div>
        
        <div class="form-group full-width">
          <label for="bio">Biografia</label>
          <textarea 
            id="bio" 
            [(ngModel)]="user.bio" 
            name="bio" 
            class="form-textarea" 
            rows="4">
          </textarea>
        </div>
      </div>
    </form>

    <ng-template #viewMode>
      <div class="form-grid">
        <div class="form-group">
          <label>Nome Completo</label>
          <div class="form-input" style="background: #f8f9fa; border: none;">
            {{ user.name }}
          </div>
        </div>
        
        <div class="form-group">
          <label>Email</label>
          <div class="form-input" style="background: #f8f9fa; border: none;">
            {{ user.email }}
          </div>
        </div>
        
        <div class="form-group">
          <label>Telefone</label>
          <div class="form-input" style="background: #f8f9fa; border: none;">
            {{ user.phone }}
          </div>
        </div>
        
        <div class="form-group">
          <label>Departamento</label>
          <div class="form-input" style="background: #f8f9fa; border: none;">
            {{ user.department }}
          </div>
        </div>
        
        <div class="form-group full-width">
          <label>Biografia</label>
          <div class="form-textarea" style="background: #f8f9fa; border: none; min-height: 100px;">
            {{ user.bio }}
          </div>
        </div>
      </div>
    </ng-template>
  </div>

  <!-- Estat√≠sticas -->
  <div class="profile-stats">
    <h3>Estat√≠sticas do Usu√°rio</h3>
    <div class="stats-grid">
      <div class="stat-item">
        <div class="stat-number">{{ stats.reportsCreated }}</div>
        <div class="stat-label">Relat√≥rios Criados</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">{{ stats.requestsMade }}</div>
        <div class="stat-label">Solicita√ß√µes</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">{{ stats.approvalRate }}%</div>
        <div class="stat-label">Taxa de Aprova√ß√£o</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">{{ stats.activeDays }}</div>
        <div class="stat-label">Dias Ativo</div>
      </div>
    </div>
  </div>
</div>